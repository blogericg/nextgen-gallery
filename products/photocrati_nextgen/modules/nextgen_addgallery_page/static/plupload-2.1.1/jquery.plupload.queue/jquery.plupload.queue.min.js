!function(u,l){var _={};function r(l){return ngg_plupload.translate(l)||l}u.fn.pluploadQueue=function(d){return d?(this.each(function(){var p,i,o,t;function s(l){var a;l.status==ngg_plupload.DONE&&(a="plupload_done"),l.status==ngg_plupload.FAILED&&(a="plupload_failed"),l.status==ngg_plupload.QUEUED&&(a="plupload_delete"),l.status==ngg_plupload.UPLOADING&&(a="plupload_uploading");var d=u("#"+l.id).attr("class",a).find("a").css("display","block");l.hint&&d.attr("title",l.hint)}function n(){u("span.plupload_total_status",i).html(p.total.percent+"%"),u("div.plupload_progress_bar",i).css("width",p.total.percent+"%"),u("span.plupload_upload_status",i).html(l.sprintf(r("Uploaded %d/%d files"),p.total.uploaded,p.files.length))}function a(){var d,e=u("ul.plupload_filelist",i).html(""),t=0;u.each(p.files,function(l,a){d="",a.status==ngg_plupload.DONE&&(a.target_name&&(d+='<input type="hidden" name="'+o+"_"+t+'_tmpname" value="'+ngg_plupload.xmlEncode(a.target_name)+'" />'),d+='<input type="hidden" name="'+o+"_"+t+'_name" value="'+ngg_plupload.xmlEncode(a.name)+'" />',d+='<input type="hidden" name="'+o+"_"+t+'_status" value="'+(a.status==ngg_plupload.DONE?"done":"failed")+'" />',t++,u("#"+o+"_count").val(t)),e.append('<li id="'+a.id+'"><div class="plupload_file_name"><span>'+a.name+'</span></div><div class="plupload_file_action"><a href="#"></a></div><div class="plupload_file_status">'+a.percent+'%</div><div class="plupload_file_size">'+ngg_plupload.formatSize(a.size)+'</div><div class="plupload_clearer">&nbsp;</div>'+d+"</li>"),s(a),u("#"+a.id+".plupload_delete a").click(function(l){u("#"+a.id).remove(),p.removeFile(a),l.preventDefault()})}),u("span.plupload_total_file_size",i).html(ngg_plupload.formatSize(p.total.size)),0===p.total.queued?u("span.plupload_add_text",i).html(r("Add Files")):u("span.plupload_add_text",i).html(l.sprintf(r("%d files queued"),p.total.queued)),u("a.plupload_start",i).toggleClass("plupload_disabled",p.files.length==p.total.uploaded+p.total.failed),e[0].scrollTop=e[0].scrollHeight,n(),!p.files.length&&p.features.dragdrop&&p.settings.dragdrop&&u("#"+o+"_filelist").append('<li class="plupload_droptext">'+r("Drag files here.")+"</li>")}i=u(this),(o=i.attr("id"))||(o=ngg_plupload.guid(),i.attr("id",o)),t=i.html(),function(l,a){a.contents().each(function(l,a){(a=u(a)).is(".plupload")||a.remove()}),a.prepend('<div class="plupload_wrapper plupload_scroll"><div id="'+l+'_container" class="plupload_container"><div class="plupload"><div class="plupload_header"><div class="plupload_header_content"><div class="plupload_header_title">'+r("Select files")+'</div><div class="plupload_header_text">'+r("Add files to the upload queue and click the start button.")+'</div></div></div><div class="plupload_content"><div class="plupload_filelist_header"><div class="plupload_file_name">'+r("Filename")+'</div><div class="plupload_file_action">&nbsp;</div><div class="plupload_file_status"><span>'+r("Status")+'</span></div><div class="plupload_file_size">'+r("Size")+'</div><div class="plupload_clearer">&nbsp;</div></div><ul id="'+l+'_filelist" class="plupload_filelist"></ul><div class="plupload_filelist_footer"><div class="plupload_file_name"><div class="plupload_buttons"><a href="#" class="button-primary" id="'+l+'_browse">'+r("Add Files")+'</a><a href="#" class="button-primary plupload_start" id="'+l+'_upload">'+r("Start Upload")+'</a></div><span class="plupload_upload_status"></span></div><div class="plupload_file_action"></div><div class="plupload_file_status"><span class="plupload_total_status">0%</span></div><div class="plupload_file_size"><span class="plupload_total_file_size">0 b</span></div><div class="plupload_progress"><div class="plupload_progress_container"><div class="plupload_progress_bar"></div></div></div><div class="plupload_clearer">&nbsp;</div></div></div></div></div><input type="hidden" id="'+l+'_count" name="'+l+'_count" value="0" /></div>')}(o,i),(d=u.extend({dragdrop:!0,browse_button:o+"_browse",container:o},d)).dragdrop&&(d.drop_element=o+"_filelist"),p=new ngg_plupload.Uploader(d),(_[o]=p).bind("UploadFile",function(l,a){u("#"+a.id).addClass("plupload_current_file")}),p.bind("Init",function(s,l){!d.unique_names&&d.rename&&i.on("click","#"+o+"_filelist div.plupload_file_name span",function(l){var d,a,e,t=u(l.target),p="";e=(d=s.getFile(t.parents("li")[0].id)).name,(a=/^(.+)(\.[^.]+)$/.exec(e))&&(e=a[1],p=a[2]),t.hide().after('<input type="text" />'),t.next().val(e).focus().blur(function(){t.show().next().remove()}).keydown(function(l){var a=u(this);13==l.keyCode&&(l.preventDefault(),d.name=a.val()+p,t.html(d.name),a.blur())})}),u("#"+o+"_container").attr("title","Using runtime: "+l.runtime),u("a.plupload_start",i).click(function(l){u(this).hasClass("plupload_disabled")||p.start(),l.preventDefault()}),u("a.plupload_stop",i).click(function(l){l.preventDefault(),p.stop()}),u("a.plupload_start",i).addClass("plupload_disabled")}),p.bind("Error",function(l,a){var d,e=a.file;e&&(d=a.message,a.details&&(d+=" ("+a.details+")"),a.code==ngg_plupload.FILE_SIZE_ERROR&&alert(r("Error: File too large:")+" "+e.name),a.code==ngg_plupload.FILE_EXTENSION_ERROR&&alert(r("Error: Invalid file extension:")+" "+e.name),e.hint=d,u("#"+e.id).attr("class","plupload_failed").find("a").css("display","block").attr("title",d)),a.code===ngg_plupload.INIT_ERROR&&setTimeout(function(){delete _[o],p.destroy(),i.html(t),p=i=t=null},1)}),p.bind("PostInit",function(l){l.settings.dragdrop&&l.features.dragdrop&&u("#"+o+"_filelist").append('<li class="plupload_droptext">'+r("Drag files here.")+"</li>")}),p.init(),p.bind("StateChanged",function(){p.state===ngg_plupload.STARTED?(u("li.plupload_delete a,div.plupload_buttons",i).hide(),u("span.plupload_upload_status,div.plupload_progress,a.plupload_stop",i).css("display","block"),u("span.plupload_upload_status",i).html("Uploaded "+p.total.uploaded+"/"+p.files.length+" files"),d.multiple_queues&&u("span.plupload_total_status,span.plupload_total_file_size",i).show()):(a(),u("a.plupload_stop,div.plupload_progress",i).hide(),u("a.plupload_delete",i).css("display","block"),d.multiple_queues&&p.total.uploaded+p.total.failed==p.files.length&&(u(".plupload_buttons,.plupload_upload_status",i).css("display","inline"),u(".plupload_start",i).addClass("plupload_disabled"),u("span.plupload_total_status,span.plupload_total_file_size",i).hide()))}),p.bind("FilesAdded",a),p.bind("FilesRemoved",function(){var l=u("#"+o+"_filelist").scrollTop();a(),u("#"+o+"_filelist").scrollTop(l)}),p.bind("FileUploaded",function(l,a){s(a)}),p.bind("UploadProgress",function(l,a){u("#"+a.id+" div.plupload_file_status",i).html(a.percent+"%"),s(a),n()}),d.setup&&d.setup(p)}),this):_[u(this[0]).attr("id")]}}(jQuery,mOxie);